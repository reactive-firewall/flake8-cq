# SIM117: Merge with-statements that use the same scope.

A little known feature of Python is that a with statement can contain multiple context managers.
This allows the code only one with statement (and therefore only 1 level of indentation).
This rule has a similar rational to SIM102.

This rule should be applied if and only if:

* context A only contains the code of Context B and no other code. That is _all_ the code in
  the nested statement will run with context A _and_ B.

## Config Options

You might have good reasons to ignore some flake8 rules. To do that, use the standard Flake8
configuration. For example:

```ini
[flake8]
extend-ignore = SIM117
```

## Anti-Pattern

```python
with A() as a:
    with B() as b:
        print('hello')
```

## Best Practice

```python
with A() as a, B() as b:
    print('hello')
```

### Python `3.10`+

Parentheses can be used to organize the context managers starting in `Python3.10`

```python
with (
    A() as a,
    B() as b
):
    print('hello')
```

## See Also

* [flake8-simplify SIM117](https://github.com/MartinThoma/flake8-simplify/issues/35)
* [flake8-simplify](https://github.com/MartinThoma/flake8-simplify?tab=readme-ov-file)
